<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xdott</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            display: flex;
			font-size: var(--dynamic-font-size, 16px); /* Default */
        }
        .sidebar i {
            color: black;
            font-size: 20px;
            margin: 35px 0;
            cursor: pointer;
        }
        .sidebar .active {
            background-color: #3E5871;
            padding: 10px;
            border-radius: 5px;
        }
        .main-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: #F9FAFB;
            padding: 10px 20px;
            color: white;
			font-weight: bold;
        }
        .home-button {
            display: flex;
            align-items: center;
        }
        .home-button a {
            color: white;
            text-decoration: none;
            font-size: 20px;
            display: flex;
            align-items: center;
        }
        .home-button i {
            margin-right: 8px;
        }
        .search-bar {
            flex-grow: 0;
            margin: 0 15px;
            width: 250px;
        }
        .search-bar input {
            width: 150%;
            padding: 8px;
            border-radius: 5px;
            border: none;
            background-color: #e5e9ed;
            color: black;
			text-align: center;
        }
        .search-bar input::placeholder {
            color: #BDC3C7;
        }
        .menu {
            display: flex;
            align-items: center;
        }
        .menu .user {
            display: flex;
            align-items: center;
            color: white;
            font-size: 16px;
        }
        .menu .user i {
            margin-right: 8px;
            font-size: 20px;
        }
		
		    /* Sidebar styling */
    .sidebar {
        width: 100px;
        background-color: #F9FAFB;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding-top: 10px;
        height: 102vh;
        position: relative;
    }
	.menu .user, .menu .profile {
            display: flex;
            align-items: center;
            color: white;
            font-size: 16px;
            margin-left: 15px;
        }
	.menu .user a, .menu .profile a {
            color: black;
            text-decoration: none;
            display: flex;
            align-items: center;
        }
        .menu .user i, .menu .profile i {
            margin-right: 8px;
            font-size: 20px;
        }

    /* Dropdown icon container */
    .dropdown {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 30px;
    }

    /* Dropdown content initially hidden */
    .dropdown-content, .submenu-content {
        display: none;
        position: absolute;
        top: 40px;
        left: 60px; /* Adjust to position dropdown beside the sidebar */
        width: 200px;
        background-color: #F9FAFB;
        border-radius: 5px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        z-index: 1;
    }
	
	.dropdown:hover .dropdown-content,
	.dropdown-content:hover {
		display: block;
		pointer-events: auto;
	}

    /* Styling for dropdown items */
    .dropdown-content div {
        color: black;
        padding: 10px;
        cursor: pointer;
    }

    /* Hover effect on dropdown items */
    .dropdown-content > div:hover {
    background-color: #66A6DF;
	}

	.submenu-content > div:hover {
    background-color: #66A6DF;
	}
	
	.dashboard-content {
            padding: 20px;
            display: flex; /* Use flexbox for layout */
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
            justify-content: space-around; /* Distribute items evenly */
    }
    .analytics-section {
            width: 33%; /* Adjust as needed - gives space for two sections side by side */
            margin-bottom: 20px;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 8px;
            box-sizing: border-box; /* Include padding and border in width */
    }
    .analytics-section h2 {
            margin-top: 0;
            color: #333; /* Darker heading color */
    }
    .data-count {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
    }
    .data-count div {
            text-align: center;
            margin: 10px;
            padding: 10px;
            border: 1px solid #eee;
            border-radius: 5px;
            min-width: 150px; /* Minimum width - adjust as needed */
            background-color: #f9f9f9;
            box-sizing: border-box; /* Include padding and border in width */
            flex: 1; /* Make data counts take up equal space */
    }
    .chart-container {
            width: 100%; /* Adjust as needed - slightly less than half for spacing */
            margin: 1%; /* Small margin between charts and container edges */
            display: inline-block; /* Key for side-by-side */
            vertical-align: top; /* Align charts to the top */
            height: 350px; /* Adjust height as needed */
            box-sizing: border-box;
			float: left;
        }
	 /* Media query for smaller screens - stack charts vertically */
	@media (max-width: 768px) {
    .chart-container {
        width: 90%; /* Take up most of the width */
        margin: 5%; /* Larger margin for spacing */
        height: 300px; /* Adjust height for smaller screens */
        float: none; /* Reset float on smaller screens */
    }
	}
	
	.analytics-section::after { /* Clearfix for floating elements */
    content: "";
    display: table;
    clear: both;
	}
    .logo {
        width: 35px; /* Adjust size as needed */
        height: auto;
    }
	
	.dropdown-content > div:first-child {
    background-color: grey;
	}
	
	.submenu {
        position: relative;
    }
    .submenu-content {
        top: 0;
        left: 100%;
        min-width: 150px;
    }
	
	.chart-container ul li {
        font-size: 16px; /* Increase size as needed */
		margin-bottom: 10px;
    }
	
	.submenu-content a {
		text-decoration: none; /* Removes underline */
		color: inherit; /* Uses parent element's color */
	}

	.submenu-content a:hover {
		text-decoration: none; /* Ensures no underline on hover */
		color: inherit; /* Keeps color unchanged on hover */
	}
	.hyperlink-hide a{
		text-decoration: none; /* Removes underline */
		color: inherit; /* Uses parent element's color */
	}
	
	body {
            font-family: 'Inter', sans-serif;
            color: #333;
        }
        h2 {
            font-weight: 600;
        }
        .chart-container ul {
            padding: 0;
        }
        .chart-container li {
            padding: 5px 0;
        }
	
    </style>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
</head>
<body>
    <div class="sidebar">
    <!-- New icon with hover effect -->
	<div class="dropdown" onmouseenter="showDropdown(this)" onmouseleave="hideDropdown(this)">
        <i class="fas fa-users"></i>
        <div class="dropdown-content">
			<div class="header">Lead Management</div>
			<div class="submenu" onmouseenter="showSubmenu(this)" onmouseleave="hideSubmenu(this)">
				AI Data Analyzer
				<div class="submenu-content">
					<div>Dashboard</div>
				</div>
			</div>
			<div class="submenu" onmouseenter="showSubmenu(this)" onmouseleave="hideSubmenu(this)">
				Incoming Data
				<div class="submenu-content">
					<div><a href="http://ec2-52-90-54-37.compute-1.amazonaws.com:8080/xdottintegration/index" target="_blank">File Upload</a></div>
					<div class="submenu" onmouseenter="showSubmenu(this)" onmouseleave="hideSubmenu(this)">
				App Sync
				<div class="submenu-content">
					<div><a href="SendReceiveClient.png" target="_blank">Sources</a></div>
					<div><a href="SendReceiveClient.png" target="_blank">Destination</a></div>
				</div>
			</div>
				</div>
			</div>
			<div class="submenu" onmouseenter="showSubmenu(this)" onmouseleave="hideSubmenu(this)">
				Database Tools
				<div class="submenu-content">
					<div>Excel IQ</div>
					<div>Table IQ</div>
					<div>Field Mapping IQ</div>
				</div>
			</div>
			<div class="submenu" onmouseenter="showSubmenu(this)" onmouseleave="hideSubmenu(this)">
				Website Tracking
				<div class="submenu-content">
					<div>Form</div>
				</div>
			</div>
			<div>AI-Powered Lead Engagement Chatbots</div>
			<div>Lead Profile</div>
			<div>Lead Scoring</div>
        </div>
    </div> 

	<div class="dropdown" onmouseenter="showDropdown(this)" onmouseleave="hideDropdown(this)">
            <i class="fas fa-project-diagram"></i>
            <div class="dropdown-content">
                <div class="header">API Integration</div>
				<div class="submenu" onmouseenter="showSubmenu(this)" onmouseleave="hideSubmenu(this)">
					X. Connectors
					<div class="submenu-content">
						<div>Excel</div>
						<div>Hubspot</div>
						<div>Marketo</div>
						<div>Salesforce</div>
						<div>Zoho</div>
						<div>Website Leads</div>
						<div>MarTech Apps</div>
					</div>
				</div>
				<div class="submenu" onmouseenter="showSubmenu(this)" onmouseleave="hideSubmenu(this)">
					Setup
					<div class="submenu-content">
						<div>Fields</div>
						<div>Lead Sources</div>
					</div>
				</div>
            </div>
    </div>
	<div class="dropdown" onmouseenter="showDropdown(this)" onmouseleave="hideDropdown(this)">
            <i class="fas fa-database"></i>
            <div class="dropdown-content">
                <div class="header">Data Governance</div>
				<div class="hyperlink-hide"><a href="dataGovernence.html" target="_blank">Governance/Compliance Rules Templates</a></div>
                <div>Consent Management</div>
				<div class="submenu" onmouseenter="showSubmenu(this)" onmouseleave="hideSubmenu(this)">
					Lead Verification
					<div class="submenu-content">
						<div><a href="http://email-app-api-env.eba-hnambdzp.us-east-1.elasticbeanstalk.com/" target="_blank">AI Email verification</a></div>
					</div>
				</div>
                <div class="submenu" onmouseenter="showSubmenu(this)" onmouseleave="hideSubmenu(this)">
					Lead Enrichment
					<div class="submenu-content">
						<div>Financial</div>
						<div>Demographic</div>
						<div>Behavior</div>
					</div>
				</div>
            </div>
    </div>
    <div class="dropdown" onmouseenter="showDropdown(this)" onmouseleave="hideDropdown(this)">
        <i class="fas fa-handshake"></i>
        <div class="dropdown-content">
            <div class="header">CRM</div>
			<div class="submenu" onmouseenter="showSubmenu(this)" onmouseleave="hideSubmenu(this)">
					Database
					<div class="submenu-content">
						<div>File Upload</div>
						<div>App Sync</div>
					</div>
			</div>
			<div class="submenu" onmouseenter="showSubmenu(this)" onmouseleave="hideSubmenu(this)">
					AI Campaign Management
					<div class="submenu-content">
						<div>Create</div>
					</div>
			</div>
            <div>AI Content Assistance</div>
            <div>AI Segment Assistance</div>
            <div>WorkFlow</div>
        </div>
    </div>
    <div class="dropdown" onmouseenter="showDropdown(this)" onmouseleave="hideDropdown(this)">
        <i class="fas fa-chart-bar"></i>
        <div class="dropdown-content">
            <div class="header">Reports</div>
            <div>Dashboard</div>
            <div>Create Report</div>
			<div>Data Visulization</div>
            <div>Email Alert</div>
        </div>
    </div>
	<div class="dropdown" onmouseenter="showDropdown(this)" onmouseleave="hideDropdown(this)">
            <i class="fas fa-cogs"></i> <!-- This is the new icon -->
            <div class="dropdown-content">
                <div class="header">Settings</div>
                <div>Domains</div>
                <div>Subscription(Upgrade)</div>
                <div>User Management</div>
				<div>Support</div>
            </div>
    </div>
	</div>

    <div class="main-content">
        <div class="header">
            <div class="home-button">
				<a href="#"> <img src="XdottLogoNew.png" alt="APiiQ Logo" class="logo"> </a>
			</div>
            <div class="search-bar">
                <input type="text" placeholder="Search">
            </div>
            <div class="menu">
				<div class="profile">
                    <a href="#"><i class="fas fa-id-badge"></i> Profile</a>
                </div>
                <div class="user">
                    <a href="#"><i class="fas fa-user"></i> Deepa</a>
                </div>
            </div>
        </div>
		
		<div class="dashboard-content">
			<div class="analytics-section">
				<h2>Missing Field Analysis</h2>
				<div class="chart-container">
					<canvas id="missingFieldsChart"></canvas>
				</div>
			</div>

			<div class="analytics-section">
				<h2>Invalid Field Entries</h2>
				<div class="chart-container">
					<canvas id="invalidFieldsChart"></canvas>
				</div>
			</div>

			<div class="analytics-section">
				<h2>Duplicate Detection</h2>
				<div class="chart-container">
					<canvas id="duplicateDetectionChart"></canvas>
				</div>
			</div>

			<div class="analytics-section">
				<h2>Lead Quality Score Summary</h2>
				<div class="chart-container">
					<canvas id="leadQualityChart"></canvas>
				</div>
			</div>
			<div class="analytics-section">
				<h2>Sample Report Metrics</h2>
				<div class="chart-container">
					<canvas id="combinedChart"></canvas>
				</div>
			</div>
			<div class="analytics-section">
    <h2>AI Observations</h2>
    <div class="chart-container">
        <ul>
            <li>Over 60% of records lack a LinkedIn URL, which may impact targeting and enrichment.</li>
            <li>Nearly half of records are missing phone numbers.</li>
            <li>A significant portion of emails and phone numbers are invalid or incomplete.</li>
            <li>Duplicate entries make up 8.3% of your lead data, which could inflate campaign costs.</li>
        </ul>
    </div>
</div>

        </div>
    </div>
	
	
	
	<script>
        function showDropdown(dropdown) {
            const dropdownContent = dropdown.querySelector('.dropdown-content');
            dropdownContent.style.display = 'block';
        }

        function hideDropdown(dropdown) {
            const dropdownContent = dropdown.querySelector('.dropdown-content');
            setTimeout(() => { // Small delay to prevent flickering
                if (!dropdown.matches(':hover') && !dropdown.querySelector('.dropdown-content:hover')) {
                    dropdownContent.style.display = 'none';
                }
            }, 100); // Adjust delay as needed
        }
		
		function showSubmenu(element) {
			element.querySelector(".submenu-content").style.display = "block";
		}
		function hideSubmenu(element) {
			element.querySelector(".submenu-content").style.display = "none";
		}
		
		// Sample data for charts (Replace with your actual data)
        const sourceData = {
            labels: ['Webinar', 'Event', 'Website', 'Social', 'Files', 'Others'],
            datasets: [{
                data: [150, 80, 220, 110, 110, 110],
                backgroundColor: ['#B0BEC5', '#CFD8DC', '#ECEFF1', '#BDBDBD', '#9E9E9E', '#D6D6D6'], // Subtle grey shades
            }]
        };

        const integrationData = {
            labels: ['CRM', 'Marketing Automation', 'Analytics Platform'],
            datasets: [{
                data: [200, 150, 100],
                backgroundColor: ['#B0BEC5', '#CFD8DC', '#ECEFF1'],
            }]
        };
		
		const missingData = {
            labels: ['Country', 'Email', 'Phone'],
            datasets: [{
                data: [30, 15, 25],
                backgroundColor: ['#B0BEC5', '#CFD8DC', '#ECEFF1'],
            }]
        };
		const syncData = {
            labels: ['Synced', 'Not Synced', 'Pending'],
            datasets: [{
                data: [350, 50, 20],
                backgroundColor: ['#B0BEC5', '#CFD8DC', '#ECEFF1'],
            }]
        };
	
	// Data from your existing analytics sections:
        const dataBySource = {
            Webinar: 150,
            Event: 80,
            Website: 220,
            Social: 110,
            Files: 110,
            Others: 110
        };

        const integrationTypes = {
            CRM: 200,
            "Marketing Automation": 150,
            "Analytics Platform": 100
        };

        const missingFields = {
            Country: 30,
            Email: 15,
            Phone: 25
        };

        const crmSyncStatus = {
            Synced: 350,
            "Not Synced": 50,
            Pending: 20
        };


        // Data Visualization Charts (based on Total Data Counts)
        const visualizationLabels = Object.keys(dataBySource).concat(Object.keys(integrationTypes));
        const visualizationData = Object.values(dataBySource).concat(Object.values(integrationTypes));
		const greyShades = ['#B0BEC5', '#CFD8DC', '#ECEFF1', '#BDBDBD', '#9E9E9E', '#D6D6D6', '#AFAFAF', '#CCCCCC', '#E0E0E0'];
		
	const greyShadesNew = ['#99DAD9', '#FFC690', '#C3A3FF', '#FFA2B5', '#A4E2D6', '#E4F5F3', '#D99A60'];


    const missingFieldsCtx = document.getElementById('missingFieldsChart').getContext('2d');
    new Chart(missingFieldsCtx, {
        type: 'bar',
        data: {
            labels: ['First Name', 'Last Name', 'Email Address', 'Phone Number', 'Company Name', 'Job Title', 'LinkedIn Profile URL'],
            datasets: [
                {
                    label: 'Records with Missing Values',
                    data: [1280, 940, 310, 4750, 620, 2190, 6000],
                    backgroundColor: greyShadesNew,
                    borderColor: '#607D8B',
                    borderWidth: 1,
                    yAxisID: 'y'
                },
                {
                    label: '% Missing',
                    data: [12.8, 9.4, 3.1, 47.5, 6.2, 21.9, 60.0],
                    type: 'line', // Line chart for percentages
                    borderColor: '#AFAFAF',
                    backgroundColor: 'AFAFAF',
                    borderWidth: 2,
                    pointRadius: 5,
                    pointBackgroundColor: '#AFAFAF',
                    yAxisID: 'y1'
                }
            ]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    type: 'linear',
                    position: 'left',
                    title: {
                        display: true,
                        text: 'Missing Records'
                    }
                },
                y1: {
                    type: 'linear',
                    position: 'right',
                    title: {
                        display: true,
                        text: '% Missing'
                    },
                    grid: {
                        drawOnChartArea: false // Removes overlap with left axis grid
                    }
                }
            }
        }
    });

    const invalidFieldsCtx = document.getElementById('invalidFieldsChart').getContext('2d');
    new Chart(invalidFieldsCtx, {
        type: 'pie',
        data: {
            labels: ['Email Address', 'Phone Number', 'Website URL'],
            datasets: [{
                data: [210, 1450, 780],
                backgroundColor: greyShadesNew
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'top'
                },
                datalabels: {
                    color: '#000',
                    font: {
                        weight: 'bold'
                    },
                    formatter: (value, ctx) => {
                        let dataset = ctx.chart.data.datasets[0].data;
                        let total = dataset.reduce((acc, val) => acc + val, 0);
                        let percentage = ((value / total) * 100).toFixed(1);
                        return `${value} (${percentage}%)`; // Shows both count and percentage
                    }
                }
            }
        },
        plugins: [ChartDataLabels] // Register plugin
    });

    const duplicateDetectionCtx = document.getElementById('duplicateDetectionChart').getContext('2d');
    new Chart(duplicateDetectionCtx, {
        type: 'doughnut',
        data: {
            labels: ['Exact Duplicates', 'Fuzzy Duplicates', 'Total Duplicates'],
            datasets: [{
                data: [520, 310, 830],
                backgroundColor: greyShadesNew
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'top'
                },
                datalabels: {
                    color: '#000',
                    font: {
                        weight: 'bold'
                    },
                    formatter: (value, ctx) => {
                        let dataset = ctx.chart.data.datasets[0].data;
                        let total = dataset.reduce((acc, val) => acc + val, 0);
                        let percentage = ((value / total) * 100).toFixed(1);
                        return `${value} (${percentage}%)`; // Display count and percentage
                    }
                }
            }
        },
        plugins: [ChartDataLabels] // Register the plugin
    });


	
	const leadQualityCtx = document.getElementById('leadQualityChart').getContext('2d');
    new Chart(leadQualityCtx, {
        type: 'bar',
        data: {
            labels: ['High Quality', 'Medium Quality', 'Low Quality'],
            datasets: [
                {
                    label: 'Lead Quality Distribution',
					data: [4200, 3000, 2800],
                    backgroundColor: greyShadesNew,
                    borderColor: '#607D8B',
                    borderWidth: 1,
                    yAxisID: 'y'
                },
                {
                    label: '% Total',
                    data: [42, 30, 28],
                    type: 'line', // Line chart for percentages
                    borderColor: '#AFAFAF',
                    backgroundColor: 'AFAFAF',
                    borderWidth: 2,
                    pointRadius: 5,
                    pointBackgroundColor: '#AFAFAF',
                    yAxisID: 'y1'
                }
            ]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    type: 'linear',
                    position: 'left',
                    title: {
                        display: true,
                        text: 'Total Records'
                    }
                },
                y1: {
                    type: 'linear',
                    position: 'right',
                    title: {
                        display: true,
                        text: '% Total'
                    },
                    grid: {
                        drawOnChartArea: false // Removes overlap with left axis grid
                    }
                }
            }
        }
    });
	
	
	
	document.addEventListener("DOMContentLoaded", function() {
    const canvas = document.getElementById('combinedChart');
    if (!canvas) {
        console.error("Canvas element with ID 'combinedChart' not found!");
        return;
    }
    canvas.style.height = "600px";
    const ctx = canvas.getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: allMetricsData,
        options: {
            responsive: true,
			maintainAspectRatio: false, // Allows the chart to expand
            plugins: {
                legend: { position: 'top' },
                title: { display: true, text: 'Combined Report Metrics' }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    stacked: true,
                    max: 300, // Adjust max value as per data range to expand bars
                    ticks: {
                        stepSize: 50 // Increases gap between y-axis labels
                    }
                },
                x: { stacked: true }
            }
        }
    });
});
	
	const allMetricsData = {
    labels: [
        "High-Quality Leads", "Medium-Quality Leads", "Low-Quality Leads", "Enriched Leads", "Raw/Incomplete Leads",
        "Avg. Lead Score", "Leads with Complete Profiles", "Missing Job Titles", "Missing Company Size", 
        "Enrichment Success Rate", "Enrichment Latency", "Successful API Calls", "Failed API Calls", "Active Integrations",
        "Inactive/Unstable Integrations", "Daily Sync Volume", "Qualified → Converted", "Captured → Qualified",
        "Average Conversion Time", "Drop-off Rate (Mid-funnel)"
    ],
    datasets: [
        {
            label: "Lead Quality Score Report",
            data: [142, 133, 125, 167, 133, 17.8, null, null, null, null, null, null, null, null, null, null, null, null, null, null],
            backgroundColor: "rgba(75, 192, 192, 0.6)"
        },
        {
            label: "Data Completeness Report",
            data: [null, null, null, null, null, null, 158, 129, 133, 185, 13.2, null, null, null, null, null, null, null, null, null],
            backgroundColor: "rgba(255, 159, 64, 0.6)"
        },
        {
            label: "API Integration Health",
            data: [null, null, null, null, null, null, null, null, null, null, null, 195, 15, 16, 12, 500, null, null, null, null],
            backgroundColor: "rgba(153, 102, 255, 0.6)"
        },
        {
            label: "Lead Conversion Pipeline",
            data: [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 118, 147, 112.4, 135],
            backgroundColor: "rgba(255, 99, 132, 0.6)"
        }
    ]
};

document.addEventListener("DOMContentLoaded", function() {
    const ctx = document.getElementById('combinedChart').getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: allMetricsData,
        options: {
            responsive: true,
            plugins: {
                legend: { position: 'top' },
                title: { display: true, text: 'Combined Report Metrics' }
            },
            scales: {
                y: { beginAtZero: true, stacked: true },
                x: { stacked: true }
            }
        }
    });
});

function updateFontSize(size) {
            document.documentElement.style.setProperty('--dynamic-font-size', size + 'px');
        }

        // Example: Assuming we extracted 18px from the image
        updateFontSize(14);


    </script>
</body>
</html>
